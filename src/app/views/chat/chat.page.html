<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button text="" default-href="employee"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button>
        <ion-icon slot="icon-only" ios="ellipsis-horizontal" md="ellipsis-vertical"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title># WHG1</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
<!--  <ion-header collapse="condense">-->
<!--    <ion-toolbar>-->
<!--      <ion-title size="large">ChatView</ion-title>-->
<!--    </ion-toolbar>-->
<!--  </ion-header>-->

  <div class="flex flex-col h-full ">

    <!-- Messages -->
    <div class="flex-grow overflow-auto p-4 scroll-smooth" #chatBox>

      <p class="text-xs pb-2 text-center text-secondary-content">Ã„ltere Nachrichten werden nicht mehr angezeigt.</p>

      @for (message of messages; track message._id) {
      <app-text-message [message]="message" [isSender]="message.sender === appStore.getUserId()"></app-text-message>
      } @empty {
      <p class="text-xs pb-2 text-center text-secondary-content">Es gibt noch keine Nachrichten</p>
      }

    </div>

    <!-- CHAT INPUT -->
    <div class="flex items-center p-4 flex-shrink-0">

      <div class="join w-full">
        <button class="p-2 bg-secondary-content text-primary rounded-l-full join-item" (click)="onClickAdd()">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
        </button>

        <textarea class="flex-grow p-2 rounded-l-full border-2 border-secondary-content text-primary bg-secondary-content join-item focus:outline-none" rows="1" type="text" placeholder="Schreibe etwas..." [(ngModel)]="newMessage" name="newMessage"></textarea>

        <button class="p-2 bg-secondary-content text-primary rounded-r-full join-item" (click)="OnClickAddMessage(newMessage)">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
          </svg>
        </button>

      </div>

    </div>

  </div>
</ion-content>
